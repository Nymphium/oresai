syntax = "proto3";

package oresai.services;

import "oresai/objects/objects.proto";

import "google/protobuf/empty.proto";

// ドキュメント管理サービス
service DocumentService {
  // ドキュメントを作成 (Create)
  rpc CreateDocument(CreateDocumentRequest) returns (oresai.objects.Document);
  // 特定のドキュメントを取得 (Read)
  rpc GetDocument(GetDocumentRequest) returns (oresai.objects.Document);
  // 組織内のドキュメントを一覧取得 (Read)
  rpc ListDocuments(ListDocumentsRequest) returns (ListDocumentsResponse);
  // ドキュメントを更新 (Update)
  rpc UpdateDocument(UpdateDocumentRequest) returns (oresai.objects.Document);
  // ドキュメントを削除 (Delete)
  rpc DeleteDocument(DeleteDocumentRequest) returns (google.protobuf.Empty);
  // ドキュメントを検索 (Search)
  rpc SearchDocuments(SearchDocumentsRequest) returns (ListDocumentsResponse);
}

message CreateDocumentRequest {
  string organization_id = 1;
  string title = 2;
  string content = 3;
}

message GetDocumentRequest {
  string organization_id = 1;
  string id = 2;
}

message ListDocumentsRequest {
  string organization_id = 1;
  int32 page_size = 2;
  string page_token = 3;
}

message ListDocumentsResponse {
  repeated oresai.objects.Document documents = 1;
  string next_page_token = 2;
}

message UpdateDocumentRequest {
  string organization_id = 1;
  string id = 2;
  optional string title = 3;
  optional string content = 4;
}

message DeleteDocumentRequest {
  string organization_id = 1;
  string id = 2;
}

message SearchDocumentsRequest {
  string organization_id = 1;
  string query = 2;
  int32 page_size = 3;
  string page_token = 4;
}
